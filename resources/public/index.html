<html>
    <head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/core.css"></link>
	<link rel="stylesheet" href="css/isolated-block-editor.css"></link>
	<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
	<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
	<script src="cljs-out/dev/main_bundle.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/isolated-block-editor.js"></script>
    </head>
    <body>
	<div id="app"></div>
	<div class="editor">
	    <textarea id="editor" rows="10"></textarea>
	    <button id="save">Save</button>
	</div>
	<script type="text/javascript">
	    ( function() {
		var textarea = document.querySelector( "#editor" );
		var button = document.querySelector( "#save" );

		function saveChanges() {
		    var value = textarea.value;

		    if ( value ) {
			localStorage.setItem( 'gutenberg', value );
		    }
		}

		function loadChanges() {
		    var value = localStorage.getItem( 'gutenberg' );

		    if ( value ) {
			textarea.value = value;
		    }
		}

		window.addEventListener( 'DOMContentLoaded', function( e ) {
		    wp.attachEditor( textarea );

		    button.addEventListener( 'click', saveChanges );

		    loadChanges();
		} );
	    } )();
	</script>
    </body>
</html>
